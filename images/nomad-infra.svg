<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 6.0.1 (0)
 -->
<!-- Title: alice_ci_infra Pages: 1 -->
<svg width="579pt" height="512pt"
 viewBox="0.00 0.00 579.00 512.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 508)">
<title>alice_ci_infra</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-508 575,-508 575,4 -4,4"/>
<text text-anchor="start" x="205.5" y="-489.8" font-family="sans-serif" font-weight="bold" font-size="14.00">ALICE CI Infrastructure</text>
<text text-anchor="start" x="133" y="-475.8" font-family="sans-serif" font-size="14.00">Overview of components and their interaction</text>
<g id="clust1" class="cluster">
<title>cluster_frontend</title>
<polygon fill="#ffd8a8" stroke="#ffd8a8" points="8,-290 8,-374 338,-374 338,-290 8,-290"/>
<text text-anchor="start" x="121.5" y="-359.8" font-family="sans-serif" font-weight="bold" font-size="14.00">Frontend node</text>
<text text-anchor="start" x="114" y="-349" font-family="sans-serif" font-size="10.00">2× </text>
<text text-anchor="start" x="129" y="-349" font-family="monospace" font-size="10.00">alibuild/frontend</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_server</title>
<polygon fill="#d0bfff" stroke="#d0bfff" points="122,-160 122,-244 563,-244 563,-160 122,-160"/>
<text text-anchor="start" x="471" y="-177.8" font-family="sans-serif" font-weight="bold" font-size="14.00">Server node</text>
<text text-anchor="start" x="413" y="-167" font-family="sans-serif" font-size="10.00">3× </text>
<text text-anchor="start" x="428" y="-167" font-family="monospace" font-size="10.00">alibuild/mesos/master</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_agent</title>
<polygon fill="#b2f2bb" stroke="#b2f2bb" points="67,-8 67,-129 418,-129 418,-8 67,-8"/>
<text text-anchor="start" x="201.5" y="-25.8" font-family="sans-serif" font-weight="bold" font-size="14.00">Agent node</text>
<text text-anchor="start" x="123" y="-15" font-family="sans-serif" font-size="10.00">≈40× </text>
<text text-anchor="start" x="149" y="-15" font-family="monospace" font-size="10.00">alibuild/mesos/slave</text>
<text text-anchor="start" x="270" y="-15" font-family="sans-serif" font-size="10.00"> &#160;&amp; bare&#45;metal hosts</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_monit</title>
<polygon fill="#a5d8ff" stroke="#a5d8ff" points="346,-290 346,-374 526,-374 526,-290 346,-290"/>
<text text-anchor="start" x="396" y="-359.8" font-family="sans-serif" font-weight="bold" font-size="14.00">Monitoring</text>
<text text-anchor="start" x="405.5" y="-349" font-family="sans-serif" font-size="10.00">CERN MONIT</text>
</g>
<!-- internet -->
<g id="node1" class="node">
<title>internet</title>
<polygon fill="#ffc9c9" stroke="none" points="288,-468 72,-468 72,-432 288,-432 288,-468"/>
<text text-anchor="middle" x="180" y="-446.3" font-family="sans-serif" font-size="14.00">Internet</text>
</g>
<!-- traefik -->
<g id="node2" class="node">
<title>traefik</title>
<polygon fill="none" stroke="black" points="76,-334 16,-334 16,-298 76,-298 76,-334"/>
<text text-anchor="middle" x="46" y="-312.3" font-family="sans-serif" font-size="14.00">Traefik</text>
</g>
<!-- internet&#45;&#45;traefik -->
<g id="edge10" class="edge">
<title>internet:sw&#45;&#45;traefik</title>
<path fill="none" stroke="black" d="M64.44,-424.72C47.14,-401.03 43.55,-367.72 43.46,-344.32"/>
<path fill="none" stroke="black" d="M66.05,-423.53C49.13,-400.81 45.54,-367.51 45.46,-344.31"/>
<polygon fill="none" stroke="black" points="62.83,-426.69 72,-432 68.15,-422.13 62.83,-426.69"/>
<polygon fill="none" stroke="black" points="47.96,-344.14 44.64,-334.08 40.96,-344.02 47.96,-344.14"/>
<text text-anchor="start" x="69.5" y="-405.4" font-family="sans-serif" font-size="12.00">web</text>
<text text-anchor="start" x="57" y="-393.4" font-family="sans-serif" font-size="12.00">requests</text>
<text text-anchor="start" x="61" y="-384.6" font-family="sans-serif" font-size="8.00">via Apache</text>
</g>
<!-- apache -->
<g id="node4" class="node">
<title>apache</title>
<polygon fill="none" stroke="black" points="329.5,-334 264.5,-334 264.5,-298 329.5,-298 329.5,-334"/>
<text text-anchor="middle" x="297" y="-312.3" font-family="sans-serif" font-size="14.00">Apache</text>
</g>
<!-- internet&#45;&#45;apache -->
<g id="edge11" class="edge">
<title>internet:se&#45;&#45;apache</title>
<path fill="none" stroke="black" d="M293.57,-423.7C309.09,-401.35 307.02,-367.73 302.8,-344.39"/>
<path fill="none" stroke="black" d="M295.22,-424.83C311.08,-401.23 309.02,-367.61 304.77,-344.04"/>
<polygon fill="none" stroke="black" points="291.68,-422.06 288,-432 297.07,-426.53 291.68,-422.06"/>
<polygon fill="none" stroke="black" points="307.17,-343.32 301.73,-334.23 300.31,-344.73 307.17,-343.32"/>
<text text-anchor="start" x="315" y="-405.4" font-family="sans-serif" font-size="12.00">ali* web</text>
<text text-anchor="start" x="309" y="-393.4" font-family="sans-serif" font-size="12.00">UIs &amp; APIs</text>
<text text-anchor="start" x="306" y="-384.6" font-family="sans-serif" font-size="8.00"> (client cert auth)</text>
</g>
<!-- consul_frontend -->
<g id="node3" class="node">
<title>consul_frontend</title>
<polygon fill="none" stroke="black" points="196,-334 134,-334 134,-298 196,-298 196,-334"/>
<text text-anchor="middle" x="165" y="-312.3" font-family="sans-serif" font-size="14.00">Consul</text>
</g>
<!-- traefik&#45;&#45;consul_frontend -->
<g id="edge3" class="edge">
<title>traefik&#45;&#45;consul_frontend</title>
<path fill="none" stroke="black" d="M86.37,-316C101.84,-316 119.24,-316 133.73,-316"/>
<polygon fill="none" stroke="black" points="86.03,-312.5 76.03,-316 86.03,-319.5 86.03,-312.5"/>
<text text-anchor="middle" x="105" y="-335.4" font-family="sans-serif" font-size="12.00">service</text>
<text text-anchor="middle" x="105" y="-322.4" font-family="sans-serif" font-size="12.00">ports</text>
</g>
<!-- consul_server -->
<g id="node5" class="node">
<title>consul_server</title>
<polygon fill="none" stroke="black" points="192,-236 130,-236 130,-200 192,-200 192,-236"/>
<text text-anchor="middle" x="161" y="-214.3" font-family="sans-serif" font-size="14.00">Consul</text>
</g>
<!-- traefik&#45;&#45;consul_server -->
<g id="edge19" class="edge">
<title>traefik:se&#45;&#45;consul_server:w</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M76,-297C82.54,-290.46 82.78,-287.64 88,-280 106.64,-252.72 95.96,-218 129,-218"/>
</g>
<!-- allocs -->
<g id="node10" class="node">
<title>allocs</title>
<polygon fill="none" stroke="black" points="261.5,-121 194.5,-121 194.5,-48 261.5,-48 261.5,-121"/>
<text text-anchor="start" x="207" y="-101.3" font-family="sans-serif" font-size="14.00">alloc 1</text>
<text text-anchor="start" x="207" y="-80.3" font-family="sans-serif" font-size="14.00">alloc 2</text>
<text text-anchor="start" x="222.5" y="-59.3" font-family="sans-serif" font-size="14.00">…</text>
</g>
<!-- traefik&#45;&#45;allocs -->
<g id="edge15" class="edge">
<title>traefik&#45;&#45;allocs:nw</title>
<path fill="none" stroke="black" d="M51.63,-287.61C61.07,-253.83 81.32,-196.25 117.28,-159.3 142.2,-134.79 163.29,-145.51 185.7,-128.35"/>
<path fill="none" stroke="black" d="M53.56,-288.15C62.96,-254.49 83.21,-196.91 118.72,-160.7 141.3,-136.58 162.38,-147.3 186.89,-129.97"/>
<polygon fill="none" stroke="black" points="49.11,-287.37 49.91,-297.94 55.87,-289.18 49.11,-287.37"/>
<polygon fill="none" stroke="black" points="188.72,-131.69 194,-122.5 184.15,-126.39 188.72,-131.69"/>
<text text-anchor="middle" x="36.92" y="-253.05" font-family="sans-serif" font-size="12.00">web</text>
<text text-anchor="middle" x="36.92" y="-240.05" font-family="sans-serif" font-size="12.00">requests</text>
</g>
<!-- consul_frontend&#45;&#45;apache -->
<g id="edge12" class="edge">
<title>consul_frontend&#45;&#45;apache</title>
<path fill="none" stroke="black" d="M206.53,-315C221.61,-315 238.69,-315 253.91,-315"/>
<path fill="none" stroke="black" d="M206.53,-317C221.61,-317 238.69,-317 253.91,-317"/>
<polygon fill="none" stroke="black" points="206.28,-312.5 196.28,-316 206.28,-319.5 206.28,-312.5"/>
<polygon fill="none" stroke="black" points="254.1,-319.5 264.1,-316 254.1,-312.5 254.1,-319.5"/>
<text text-anchor="middle" x="230.25" y="-335.4" font-family="sans-serif" font-size="12.00">aliconsul</text>
<text text-anchor="middle" x="230.25" y="-322.4" font-family="sans-serif" font-size="12.00">UI &amp; API</text>
</g>
<!-- consul_frontend&#45;&#45;consul_server -->
<g id="edge2" class="edge">
<title>consul_frontend&#45;&#45;consul_server</title>
<path fill="none" stroke="black" d="M156.45,-287.86C155.86,-285.22 155.36,-282.57 155,-280 152.93,-265.25 154.92,-248.39 157.15,-236.14"/>
<polygon fill="none" stroke="black" points="153.13,-288.97 159.04,-297.76 159.9,-287.2 153.13,-288.97"/>
<text text-anchor="start" x="155" y="-270.4" font-family="sans-serif" font-size="12.00">service</text>
<text text-anchor="middle" x="175" y="-257.4" font-family="sans-serif" font-size="12.00">info</text>
</g>
<!-- apache&#45;&#45;consul_server -->
<g id="edge1" class="edge">
<title>apache&#45;&#45;consul_server</title>
<path fill="none" stroke="black" d="M254.84,-300.28C242.37,-294.91 229.09,-288.12 218,-280 205.55,-270.89 205.49,-265.31 195,-254 189.59,-248.16 183.56,-241.89 178.11,-236.29"/>
<polygon fill="none" stroke="black" points="253.59,-303.56 264.17,-304.12 256.25,-297.08 253.59,-303.56"/>
<text text-anchor="start" x="218" y="-268.4" font-family="sans-serif" font-size="12.00">DNS</text>
<text text-anchor="start" x="218" y="-259.6" font-family="sans-serif" font-size="8.00">via dnsmasq</text>
</g>
<!-- vault -->
<g id="node6" class="node">
<title>vault</title>
<polygon fill="none" stroke="black" points="282,-236 228,-236 228,-200 282,-200 282,-236"/>
<text text-anchor="middle" x="255" y="-214.3" font-family="sans-serif" font-size="14.00">Vault</text>
</g>
<!-- apache&#45;&#45;vault -->
<g id="edge14" class="edge">
<title>apache&#45;&#45;vault</title>
<path fill="none" stroke="black" d="M284.52,-288.96C278.61,-275.46 271.45,-259.09 265.56,-245.63"/>
<path fill="none" stroke="black" d="M286.35,-288.16C280.44,-274.66 273.28,-258.29 267.39,-244.82"/>
<polygon fill="none" stroke="black" points="282.28,-290.08 289.49,-297.84 288.69,-287.27 282.28,-290.08"/>
<polygon fill="none" stroke="black" points="269.66,-243.77 262.44,-236.01 263.25,-246.58 269.66,-243.77"/>
<text text-anchor="middle" x="303.5" y="-270.4" font-family="sans-serif" font-size="12.00">alivault</text>
<text text-anchor="middle" x="303.5" y="-257.4" font-family="sans-serif" font-size="12.00">UI &amp; API</text>
</g>
<!-- nomad_server -->
<g id="node7" class="node">
<title>nomad_server</title>
<polygon fill="none" stroke="black" points="382,-236 318,-236 318,-200 382,-200 382,-236"/>
<text text-anchor="middle" x="350" y="-214.3" font-family="sans-serif" font-size="14.00">Nomad</text>
</g>
<!-- apache&#45;&#45;nomad_server -->
<g id="edge13" class="edge">
<title>apache&#45;&#45;nomad_server</title>
<path fill="none" stroke="black" d="M322.96,-289.54C325.61,-286.34 328.11,-282.91 330.14,-279.49 336.2,-269.34 340.55,-256.82 343.5,-245.89"/>
<path fill="none" stroke="black" d="M324.5,-290.81C327.22,-287.52 329.72,-284.09 331.86,-280.51 338.09,-270 342.43,-257.48 345.43,-246.41"/>
<polygon fill="none" stroke="black" points="320.9,-288.08 316.79,-297.84 326.09,-292.78 320.9,-288.08"/>
<polygon fill="none" stroke="black" points="347.92,-246.74 346.9,-236.19 341.12,-245.07 347.92,-246.74"/>
<text text-anchor="middle" x="369" y="-270.4" font-family="sans-serif" font-size="12.00">alinomad</text>
<text text-anchor="middle" x="369" y="-257.4" font-family="sans-serif" font-size="12.00">UI &amp; API</text>
</g>
<!-- consul_server&#45;&#45;vault -->
<g id="edge20" class="edge">
<title>consul_server&#45;&#45;vault</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M192.21,-218C203.98,-218 215.76,-218 227.53,-218"/>
</g>
<!-- consul_agent -->
<g id="node9" class="node">
<title>consul_agent</title>
<polygon fill="none" stroke="black" points="137,-102.5 75,-102.5 75,-66.5 137,-66.5 137,-102.5"/>
<text text-anchor="middle" x="106" y="-80.8" font-family="sans-serif" font-size="14.00">Consul</text>
</g>
<!-- consul_server&#45;&#45;consul_agent -->
<g id="edge4" class="edge">
<title>consul_server&#45;&#45;consul_agent</title>
<path fill="none" stroke="black" d="M149.91,-190.48C138.96,-164.3 122.54,-125.04 113.19,-102.7"/>
<polygon fill="none" stroke="black" points="146.72,-191.93 153.81,-199.81 153.18,-189.23 146.72,-191.93"/>
<text text-anchor="end" x="118.01" y="-129.96" font-family="sans-serif" font-size="12.00">register</text>
<text text-anchor="middle" x="95.01" y="-116.96" font-family="sans-serif" font-size="12.00">services</text>
</g>
<!-- consul_server&#45;&#45;allocs -->
<g id="edge7" class="edge">
<title>consul_server&#45;&#45;allocs</title>
<path fill="none" stroke="black" d="M169.76,-199.81C178.75,-182.15 193.13,-153.94 205.34,-129.97"/>
<polygon fill="none" stroke="black" points="208.48,-131.51 209.9,-121.02 202.25,-128.34 208.48,-131.51"/>
<text text-anchor="start" x="182.08" y="-185.58" font-family="sans-serif" font-size="12.00">DNS</text>
<text text-anchor="start" x="182.08" y="-176.78" font-family="sans-serif" font-size="8.00">via dnsmasq</text>
</g>
<!-- vault&#45;&#45;nomad_server -->
<g id="edge21" class="edge">
<title>vault&#45;&#45;nomad_server</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M282.09,-218C294.03,-218 305.96,-218 317.9,-218"/>
</g>
<!-- vault&#45;&#45;allocs -->
<g id="edge6" class="edge">
<title>vault&#45;&#45;allocs</title>
<path fill="none" stroke="black" d="M251.47,-199.81C247.89,-182.39 242.21,-154.69 237.33,-130.92"/>
<polygon fill="none" stroke="black" points="240.73,-130.11 235.29,-121.02 233.88,-131.52 240.73,-130.11"/>
<text text-anchor="middle" x="261.5" y="-142.4" font-family="sans-serif" font-size="12.00">secrets</text>
</g>
<!-- prometheus -->
<g id="node8" class="node">
<title>prometheus</title>
<polygon fill="none" stroke="black" points="537,-236 439,-236 439,-200 537,-200 537,-236"/>
<text text-anchor="middle" x="488" y="-214.3" font-family="sans-serif" font-size="14.00">Prometheus</text>
</g>
<!-- nomad_server&#45;&#45;prometheus -->
<g id="edge22" class="edge">
<title>nomad_server&#45;&#45;prometheus</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M382.01,-218C395.85,-218 412.52,-218 428.5,-218"/>
<polygon fill="none" stroke="black" points="428.86,-221.5 438.86,-218 428.86,-214.5 428.86,-221.5"/>
<text text-anchor="start" x="393" y="-236.4" font-family="sans-serif" font-style="italic" font-size="12.00">cluster</text>
<text text-anchor="start" x="391" y="-224.4" font-family="sans-serif" font-style="italic" font-size="12.00">metrics</text>
</g>
<!-- nomad_agent -->
<g id="node11" class="node">
<title>nomad_agent</title>
<polygon fill="none" stroke="black" points="410,-102.5 346,-102.5 346,-66.5 410,-66.5 410,-102.5"/>
<text text-anchor="middle" x="378" y="-80.8" font-family="sans-serif" font-size="14.00">Nomad</text>
</g>
<!-- nomad_server&#45;&#45;nomad_agent -->
<g id="edge5" class="edge">
<title>nomad_server&#45;&#45;nomad_agent</title>
<path fill="none" stroke="black" d="M353.66,-199.81C359.03,-174.61 368.97,-127.9 374.34,-102.7"/>
<text text-anchor="middle" x="323.94" y="-169.93" font-family="sans-serif" font-size="12.00">scheduling</text>
</g>
<!-- prometheus&#45;&#45;prometheus -->
<g id="edge18" class="edge">
<title>prometheus&#45;&#45;prometheus</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M546.96,-225.12C551.92,-223.59 555,-221.22 555,-218 555,-212.98 547.49,-210.01 537.08,-209.11"/>
<polygon fill="none" stroke="black" points="546.31,-221.68 537.08,-226.89 547.54,-228.57 546.31,-221.68"/>
</g>
<!-- prometheus&#45;&#45;nomad_agent -->
<g id="edge23" class="edge">
<title>prometheus:w&#45;&#45;nomad_agent</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M428.47,-214.29C407.42,-198.19 389.54,-133.72 381.93,-102.55"/>
<polygon fill="none" stroke="black" points="427.41,-217.64 438,-218 429.95,-211.11 427.41,-217.64"/>
<text text-anchor="start" x="395" y="-143.4" font-family="sans-serif" font-style="italic" font-size="12.00">metrics</text>
</g>
<!-- consul_agent&#45;&#45;allocs -->
<g id="edge8" class="edge">
<title>consul_agent&#45;&#45;allocs</title>
<path fill="none" stroke="black" d="M137.1,-84.5C154.61,-84.5 176.48,-84.5 194.39,-84.5"/>
<text text-anchor="middle" x="165.75" y="-103.9" font-family="sans-serif" font-size="12.00">health</text>
<text text-anchor="middle" x="165.75" y="-90.9" font-family="sans-serif" font-size="12.00">checks</text>
</g>
<!-- allocs&#45;&#45;nomad_agent -->
<g id="edge9" class="edge">
<title>allocs&#45;&#45;nomad_agent</title>
<path fill="none" stroke="black" d="M261.66,-84.5C286.88,-84.5 321.18,-84.5 345.99,-84.5"/>
<text text-anchor="middle" x="303.75" y="-103.9" font-family="sans-serif" font-size="12.00">job/alloc</text>
<text text-anchor="middle" x="303.75" y="-90.9" font-family="sans-serif" font-size="12.00">supervision</text>
</g>
<!-- grafana -->
<g id="node12" class="node">
<title>grafana</title>
<polygon fill="none" stroke="black" points="422,-334 354,-334 354,-298 422,-298 422,-334"/>
<text text-anchor="middle" x="388" y="-312.3" font-family="sans-serif" font-size="14.00">Grafana</text>
</g>
<!-- cortex -->
<g id="node13" class="node">
<title>cortex</title>
<polygon fill="none" stroke="black" points="518,-334 458,-334 458,-298 518,-298 518,-334"/>
<text text-anchor="middle" x="488" y="-312.3" font-family="sans-serif" font-size="14.00">Cortex</text>
</g>
<!-- grafana&#45;&#45;cortex -->
<g id="edge16" class="edge">
<title>grafana&#45;&#45;cortex</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M432.6,-316C440.98,-316 449.37,-316 457.75,-316"/>
<polygon fill="none" stroke="black" points="432.38,-312.5 422.38,-316 432.37,-319.5 432.38,-312.5"/>
</g>
<!-- cortex&#45;&#45;prometheus -->
<g id="edge17" class="edge">
<title>cortex&#45;&#45;prometheus</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M488,-287.61C488,-270.99 488,-250.3 488,-236.01"/>
<polygon fill="none" stroke="black" points="484.5,-287.84 488,-297.84 491.5,-287.84 484.5,-287.84"/>
<text text-anchor="start" x="488" y="-270.4" font-family="sans-serif" font-size="12.00"> &#160;</text>
<text text-anchor="start" x="495" y="-270.4" font-family="sans-serif" font-style="italic" font-size="12.00">push metrics</text>
<text text-anchor="start" x="498" y="-258.4" font-family="sans-serif" font-style="italic" font-size="12.00">to storage</text>
</g>
</g>
</svg>
